<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Filestack</title>
</head>
<body>
<main th:fragment="filestack">

    <div class="container">
        <h1 class="text-center">upload a profile picture</h1>
        <form th:action="@{/newuser/newchefprofile}" th:method="post" th:object="${chef}">
            <button id="picture" type="button" th:value="*{picture}">Insert a profile picture</button>
        </form>
    </div>

<div th:field="*{picture}"></div>

<img src="https://cdn.filestackcontent.com/resize=width:400/crop_faces=faces:1,buffer:200,w:300/circle/2h25ZGRHTfmQ2DBEt3yR" alt="Image uploaded with Filestack" title="Image uploaded with Filestack">

    <!--th:value="${chef.picture}"-->

<script src="https://static.filestackapi.com/v3/filestack.js"></script>
<script type="text/javascript">
    var fsClient = filestack.init('ATnrBVr9hSauBEG4HxXF3z');
    function openPicker() {
        fsClient.pick({
            accept: 'image/*',
            minFiles: 1,
            maxFiles: 1,
            maxSize: (100 * 1024 * 1024)
        }).then(function (response) {
            // declare this function to handle response
            // handleFilestack(response);
        });
    }

    var picture = document.getElementById('picture');
    function buttonClick () {
        picture.addEventListener('click', function () {
            openPicker();
        });
    } buttonClick();
</script>

</main>
</body>
</html>